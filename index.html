<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>A„ÄúZ„Çø„Ç§„Éî„É≥„Ç∞Á∑¥Áøí</title>
  <style>
    body {
      background-color: #eef7f1;
      font-family: 'Segoe UI', 'Hiragino Kaku Gothic ProN', Meiryo, sans-serif;
      text-align: center;
      margin: 20px;
      color: #2e3b30;
    }
    #keyboard-wrapper {
      position: relative;
      display: inline-block;
    }
    #keyboard-image {
      width: 600px;
      height: auto;
      margin-bottom: 20px;
    }
    #key-indicator {
      position: absolute;
      width: 30px;
      height: 30px;
      border-radius: 8px;
      background-color: rgba(255, 0, 0, 0.5);
      pointer-events: none;
      transform: translate(-50%, -50%);
    }
    #target {
      font-size: 4em;
      margin: 40px;
      letter-spacing: 0.5em;
      font-weight: bold;
    }
    #highlight {
      color: #d9534f;
      background-color: #ffecec;
      border-radius: 4px;
      padding: 2px 4px;
    }
    #inputBox {
      font-size: 2em;
      padding: 10px;
      width: 60%;
      letter-spacing: 0.2em;
      background-color: #ffffff;
      border: 2px solid #a3d9b1;
      border-radius: 8px;
      color: #2e3b30;
      margin-top: 20px;
      display: block;
      margin-left: auto;
      margin-right: auto;
    }
    #results {
      position: static;
      margin-top: 30px;
      max-height: 30vh;
      overflow-y: auto;
      background-color: #ffffffcc;
      border-radius: 10px;
      padding: 10px;
      width: 60%;
      color: #2e3b30;
      text-align: center;
      margin-left: auto;
      margin-right: auto;
    }
    #message {
      position: static;
      font-size: 1.2em;
      margin-top: 10px;
      font-weight: bold;
      color: #2e6e4c;
      margin-bottom: 20px;
    }
    .error {
      background-color: #ffcccc;
    }
    #targetDisplay {
      font-size: clamp(1.2em, 3vw, 2.5em);
      margin: 30px auto;
      letter-spacing: 0.35em;
      font-weight: bold;
      width: 100%;
      max-width: 100%;
      white-space: nowrap;
      overflow: hidden;
      box-sizing: border-box;
      display: flex;
      justify-content: center;
    }
    #history {
      position: fixed;
      top: 100px;
      right: 20px;
      width: 280px;
      max-height: 80vh;
      overflow-y: auto;
      background-color: #ffffffcc;
      padding: 15px;
      border-radius: 10px;
      text-align: left;
      font-size: 0.9em;
      color: #2e3b30;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
    }
  </style>
</head>
<body>

<p id="inputNotice" style="color: #b94a48; font-weight: bold; font-size: 1.1em; background: #fff0f0; padding: 10px; border-radius: 8px; display: inline-block; margin-bottom: 20px;">
  ‚Äª ÂçäËßíËã±Êï∞ÂÖ•Âäõ„Åß„Çø„Ç§„Éî„É≥„Ç∞„Åó„Å¶„Åè„Å†„Åï„ÅÑÔºàÂÖ®Ëßí„Éª„Åã„Å™ÂÖ•Âäõ„ÅØÁÑ°Âäπ„Åß„ÅôÔºâ
</p>

<div id="targetDisplay">ABCDEFGHIJKLMNOPQRSTUVWXYZ</div>

<div id="keyboard-wrapper">
  <img id="keyboard-image" src="keyboard-image.png" alt="„Ç≠„Éº„Éú„Éº„ÉâÂõ≥">
  <div id="key-indicator"></div>
</div>

<input id="inputBox" type="text" maxlength="26" autofocus autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false">
<div id="results"></div>
<div id="message"></div>
<audio id="errorSound" src="https://www.soundjay.com/button/beep-07.wav" preload="auto"></audio>

<script>
  const targetString = "abcdefghijklmnopqrstuvwxyz";
  let currentIndex = 0;
  const inputBox = document.getElementById("inputBox");
  const keyIndicator = document.getElementById("key-indicator");
  const keyboardWrapper = document.getElementById("keyboard-wrapper");
  const results = document.getElementById("results");
  const message = document.getElementById("message");
  const errorSound = document.getElementById("errorSound");
  const targetDisplay = document.getElementById("targetDisplay");

  function updateTargetDisplay() {
    const before = targetString.slice(0, currentIndex);
    const current = targetString[currentIndex];
    const after = targetString.slice(currentIndex + 1);
    targetDisplay.innerHTML = before + `<span id="highlight">${current}</span>` + after;
  }

  const keyPositions = {
    a: { left: 110, top: 210 }, b: { left: 230, top: 260 }, c: { left: 170, top: 260 },
    d: { left: 170, top: 210 }, e: { left: 170, top: 160 }, f: { left: 210, top: 210 },
    g: { left: 250, top: 210 }, h: { left: 290, top: 210 }, i: { left: 370, top: 160 },
    j: { left: 330, top: 210 }, k: { left: 370, top: 210 }, l: { left: 410, top: 210 },
    m: { left: 310, top: 260 }, n: { left: 270, top: 260 }, o: { left: 410, top: 160 },
    p: { left: 450, top: 160 }, q: { left: 90, top: 160 }, r: { left: 210, top: 160 },
    s: { left: 130, top: 210 }, t: { left: 250, top: 160 }, u: { left: 330, top: 160 },
    v: { left: 190, top: 260 }, w: { left: 130, top: 160 }, x: { left: 150, top: 260 },
    y: { left: 290, top: 160 }, z: { left: 110, top: 260 },
  };

  function moveIndicator(char) {
    const pos = keyPositions[char.toLowerCase()];
    if (pos) {
      keyIndicator.style.left = pos.left + 'px';
      keyIndicator.style.top = pos.top + 'px';
      keyIndicator.style.display = 'block';
    } else {
      keyIndicator.style.display = 'none';
    }
  }

  inputBox.addEventListener("input", () => {
    const inputChar = inputBox.value.slice(-1).toLowerCase();
    const targetChar = targetString[currentIndex];
    moveIndicator(inputChar);

    if (inputChar === targetChar) {
      currentIndex++;
      updateTargetDisplay();
      if (currentIndex >= targetString.length) {
        message.textContent = "üéâ ÂÆå‰∫Ü„Åó„Åæ„Åó„ÅüÔºÅ";
        inputBox.disabled = true;
      }
    } else {
      results.innerHTML += `<span class="error">‚ùå ${inputChar}</span> `;
      errorSound.play();
    }
    inputBox.value = "";
  });

  updateTargetDisplay();
</script>

<div id="history"></div>

</body>
</html>
